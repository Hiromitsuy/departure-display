# 電車発車時刻標シミュレーター (Train Departure Display Simulator)

電車の発車時刻を、実際の駅に設置されているような電光掲示板風に表示する、フロントエンドのシミュレーションプロジェクトです。

## 概要

このプロジェクトは、特定の駅の時刻表データをJSON形式で読み込み、ウェブブラウザ上でリアルな発車案内表示を再現します。**Vite + React + TypeScript** を使用して構築されており、路線ごとのテーマカラーや、列車の種別に応じた柔軟な色分けなど、視覚的に分かりやすく、カスタマイズ性の高い表示が可能です。ローカル環境での実行はもちろん、ビルドしてWebサーバーにデプロイすることもできます。

## プロジェクトの実行方法

本プロジェクトは **Vite + React + TypeScript** で構成されています。実行には Node.js と、パッケージ管理ツール（npm または yarn）が必要です。

### 開発環境での実行

1. **パッケージのインストール**
   リポジトリをローカルにクローンした後、プロジェクトのルートディレクトリでターミナルを開き、下記のいずれかのコマンドを実行してください。これにより、プロジェクトの実行に必要なライブラリ（依存関係）がインストールされます。

   ```bash
   # npm を使用する場合
   npm install
   
   # yarn を使用する場合
   yarn
   ```

2. **開発サーバーの起動**
   インストール完了後、下記のいずれかのコマンドで開発用サーバーを起動します。

   ```bash
   # npm を使用する場合
   npm run dev
   
   # yarn を使用する場合
   yarn dev
   ```

   サーバーが起動すると、ターミナルに `http://localhost:xxxx` のようなローカルアドレスが表示されます。このアドレスにブラウザでアクセスすると、シミュレーターが表示されます。ファイルの内容を編集すると、自動的にブラウザがリロードされます。

### ビルドと公開

`build` コマンドを実行すると、`dist` ディレクトリに公開用に最適化（圧縮・軽量化）されたJavaScriptファイルとHTMLファイルが生成されます。
この `dist` ディレクトリの中身全体を、GitHub Pages, Vercel, Netlify といった静的サイト向けのホスティングサービスにアップロードすることで、ウェブ上に公開できます。

### 初期表示データの変更

シミュレーター起動時に最初に表示される時刻表データを変更するには、以下のいずれかの方法で行います。

* **方法1: サンプルファイルを直接編集する**
  最も手軽な方法です。`src/sampleShinjuku.json` の内容を、表示したいデータ構造に合わせて直接書き換えます。

* **方法2: 読み込むファイルを変更する**
  別のデータファイルを使用したい場合、`App.tsx` の冒頭にある `import` 文を、任意のデータファイル（JSON）を指すようにパスを書き換えます。これにより、プロジェクトの初期表示データを柔軟に切り替えることができます。

  ```tsx
  // App.tsx
  import InitData from './public/sampleShinjuku.json'; // ← このパスを表示したいJSONファイルのパスに書き換える
  ```

## 作成したデータセットの読み込み方法

ローカルで作成した、あるいは手動で用意したデータセット（JSONファイル）を発車標シミュレーターに動的に読み込ませるには、以下の手順に従ってください。

1. 発車標シミュレーターの画面をブラウザで開きます。

2. 画面上部に表示されている駅名部分をクリックします。（マウスカーソルを合わせると、クリック可能なエリアの背景色が変わるため、そこで判断できます）

3. OSのファイル選択ダイアログが表示されるので、読み込みたいデータセットのJSONファイルを選択します。ファイルは後述するデータ構造に準拠している必要があります。

4. ファイルを選択すると、そのデータが即座に読み込まれ、発車標の表示が更新されます。

## データセットの作成方法

時刻表データは、プロジェクト内の `src/model/timetableModel.ts` で定義されたTypeScriptの型定義に従って、JSON形式で作成する必要があります。この構造に従わないデータは正しく表示されません。

以下にデータの基本構造と、各プロパティについての詳細な説明を記載します。

### データ構造の例

```json
{
  "station": "新宿",
  "lines": [
    {
      "lineName": "山手線",
      "lineColor": "#80C342",
      "corporateColor": "#008803",
      "directions": [
        {
          "directionTitle": "上野・池袋方面 （外回り）",
          "tables": [
            {
              "type": "各駅停車",
              "departureTime": "13:40",
              "destination": "上野・池袋 方面"
            },
            {
              "type": "各駅停車",
              "typeColor": "#2387c2",
              "departureTime": "13:46",
              "destination": "上野・池袋 方面"
            }
          ]
        },
        {
          "directionTitle": "品川・渋谷方面 （内回り）",
          "tables": [
            {
              "type": "各駅停車",
              "departureTime": "13:43",
              "destination": "品川・渋谷方面"
            },
            {
              "type": "各駅停車",
              "departureTime": "13:49",
              "typeOutlineColor": "orange",
              "fontColor": "orange",
              "destination": "品川・渋谷方面"
            }
          ]
        }
      ]
    }
  ]
}
```

### プロパティの詳細説明

* `station` (string): **駅名**を文字列で指定します。（例: `"新宿"`）

* `lines` (Array): その駅に乗り入れている**路線情報の配列**です。複数の路線がある場合は、この配列にオブジェクトを追加していきます。

  * `lineName` (string): **路線名**を文字列で指定します。（例: `"山手線"`）

  * `lineColor` (string): 路線の**テーマカラー**を16進数のカラーコードで指定します。主に路線の見出し部分の背景色として使用されます。

  * `corporateColor` (string): 鉄道会社の**コーポレートカラー**を16進数のカラーコードで指定します。

  * `directions` (Array): **方面情報の配列**です。同じ路線でも方面（上り・下りなど）によって表示を分けることができます。

    * `directionTitle` (string): **方面の名称**を文字列で指定します。（例: `"上野・池袋方面 （外回り）"`）

    * `tables` (Array): その方面に発車する**列車情報の配列**です。時刻の早い順に表示されます。

      * `type` (string): **列車種別**を文字列で指定します。（例: `"各駅停車"`, `"快速"`, `"特急"`）

      * `departureTime` (string): **発車時刻**を `"HH:mm"` 形式の文字列で指定します。

      * `destination` (string): **行き先**を文字列で指定します。

      * `typeColor` (string, optional): 種別表示の**背景色**をカラーコードで指定します。（任意項目。指定がない場合はデフォルト色）

      * `typeOutlineColor` (string, optional): 種別表示の**枠線の色**をカラーコードで指定します。（任意項目）

      * `fontColor` (string, optional): 種別表示の**文字色**をカラーコードで指定します。（任意項目）
